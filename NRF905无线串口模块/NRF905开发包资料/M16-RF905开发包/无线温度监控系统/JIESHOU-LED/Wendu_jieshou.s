	.module Wendu_jieshou.c
	.area text(rom, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.area data(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
_TxAddress::
	.blkb 2
	.area idata
	.byte 204,204
	.area data(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.blkb 2
	.area idata
	.byte 204,204
	.area data(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.dbsym e TxAddress _TxAddress A[4:4]c
_seg::
	.blkb 2
	.area idata
	.byte 192,207
	.area data(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.blkb 2
	.area idata
	.byte 164,176
	.area data(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.blkb 2
	.area idata
	.byte 153,146
	.area data(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.blkb 2
	.area idata
	.byte 130,248
	.area data(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.blkb 2
	.area idata
	.byte 128,144
	.area data(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.dbsym e seg _seg A[10:10]c
_seg1::
	.blkb 2
	.area idata
	.byte 64,'O
	.area data(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.blkb 2
	.area idata
	.byte 36,48
	.area data(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.blkb 2
	.area idata
	.byte 25,18
	.area data(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.blkb 2
	.area idata
	.byte 2,'x
	.area data(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.blkb 2
	.area idata
	.byte 0,16
	.area data(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.dbsym e seg1 _seg1 A[10:10]c
_RFConf::
	.blkb 2
	.area idata
	.byte 0,'L
	.area data(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.blkb 2
	.area idata
	.byte 12,'D
	.area data(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.blkb 2
	.area idata
	.byte 4,4
	.area data(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.blkb 2
	.area idata
	.byte 204,204
	.area data(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.blkb 2
	.area idata
	.byte 204,204
	.area data(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.blkb 1
	.area idata
	.byte 'X
	.area data(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.dbsym e RFConf _RFConf A[11:11]c
	.area text(rom, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
	.dbfunc e Delay _Delay fV
;              i -> R20,R21
;              x -> R16,R17
	.even
_Delay::
	st -y,R20
	st -y,R21
	.dbline -1
	.dbline 100
; //ICC-AVR application builder : 2007-8-11 20:37:32
; // Target : M16
; // Crystal: 8.0000Mhz
; #include <iom16v.h>
; #include <macros.h>
; #define uint  unsigned int
; #define uchar unsigned char
; //---------------------------------NRF905Ä£Ê½¿ØÖÆ¶¨Òå---------------------------------
; //#define  nrf905_TX_EN	  PB0	    //Êä³ö1
; #define   Hign_nrf905_TX_EN    PORTB |= (1 << PB0);   
; #define   Low_nrf905_TX_EN     PORTB &= ~(1 << PB0); 
; //#define  nrf905_TRX_CE  PD4 	    //Êä³ö1
; #define   Hign_nrf905_TRX_CE    PORTD |= (1 << PD4);   
; #define   Low_nrf905_TRX_CE     PORTD &= ~(1 << PD4); 
; //#define  nrf905_PWR     PB1 	    //Êä³ö1
; #define   Hign_nrf905_PWR    PORTB |= (1 << PB1);   
; #define   Low_nrf905_PWR     PORTB &= ~(1 << PB1); 
; //--------------------------------NRF905-SPI¿Ú½Ó¿Ú¶¨Òå--------------------------
; //#define  nrf905_MISO	  PB6   	//ÊäÈë0
; //#define  nrf905_MOSI    PB5	    //Êä³ö1
; //#define  nrf905_SCK     PB7	    //Êä³ö1
; #define   Low_nrf905_SCK     PORTB &= ~(1 << PB7); 
; //#define  nrf905_CSN     PB4		//Êä³ö1		
; #define   Hign_nrf905_CSN    PORTB |= (1 << PB4);   
; #define   Low_nrf905_CSN     PORTB &= ~(1 << PB4); 						
; //-------------------------------NRF905×´Ì¬Êä³ö¿Ú-------------------------------
; //#define  nrf905_CD      PD3	    //ÊäÈë0
; #define   Hign_nrf905_CD    PORTD |= (1 << PD3);   
; #define   Low_nrf905_CD     PORTD &= ~(1 << PD3); 
; #define   Read_nrf905_CD    PINB & (1 << PD3);
; //#define  nrf905_AM      PB3	    //ÊäÈë0
; #define   Hign_nrf905_AM    PORTB |= (1 << PB3);   
; #define   Low_nrf905_AM     PORTB &= ~(1 << PB3); 
; #define   Read_nrf905_AM    PINB & (1 << PB3);
; //#define  nrf905_DR      PB2  		//ÊäÈë0
; #define   Hign_nrf905_DR     PORTB |= (1 << PB2);   
; #define   Low_nrf905_DR     PORTB &= ~(1 << PB2); 
; #define   Read_nrf905_DR    PINB & (1 << PB2);   
; //------------------------------ÊýÂë¹ÜÎ»Ñ¡--------------------------------------
; //#define Display1   PA1  		    //Êä³ö1
; #define   Hign_Display1     PORTA |= (1 << PA1);   
; #define   Low_Display1    PORTA &= ~(1 << PA1); 
; //#define Display2      PA2  		//Êä³ö1
; #define   Hign_Display2     PORTA |= (1 << PA2);   
; #define   Low_Display2    PORTA &= ~(1 << PA2); 
; //#define Display3     PA3  		//Êä³ö1
; #define   Hign_Display3     PORTA |= (1 << PA3);   
; #define   Low_Display3     PORTA &= ~(1 << PA3); 
; //#define Display4      PA4 		//Êä³ö1
; #define   Hign_Display4     PORTA |= (1 << PA4);   
; #define   Low_Display4     PORTA &= ~(1 << PA4);   
; //-------------------------------BELL·äÃ÷Æ÷-------------------------------------
; #define   Hign_BELL  PORTD |= (1 << PD5);   
; #define   Low_BELL     PORTD &= ~(1 << PD5); 
; //-------------------------------JDQ¼ÌµçÆ÷--------------------------------------
; #define   Hign_JDQ  PORTD |= (1 << PD7)
; #define   Low_JDQ     PORTD &= ~(1 << PD7) 
; 
; //----------------------------------NRF905-SPIÖ¸Áî------------------------------
; #define WC	0x00
; #define RRC	0x10
; #define WTP	0x20
; #define RTP	0x21
; #define WTA	0x22
; #define RTA	0x23
; #define RRP	0x24
; //---------------------------------·¢ËÍÊý¾Ý-------------------------------------
; uchar TxRxBuffer[4];
; //----------------------------------½ÓÊÕµØÖ·------------------------------------
; uchar TxAddress[4]={0xcc,0xcc,0xcc,0xcc };    
; uint temp[6];
; uchar seg[10]={0xC0,0xCF,0xA4,0xB0,0x99,0x92,0x82,0xF8,0x80,0x90};         //0~~9¶ÎÂë
; uchar seg1[10]={0x40,0x4F,0x24,0x30,0x19,0x12,0x02,0x78,0x00,0x10}; 
; //----------------------------------¼Ä´æÆ÷ÅäÖÃ----------------------------------
; uchar RFConf[11]=
; {
;   0x00,                            //ÅäÖÃÃüÁî//
;   0x4c,                           //CH_NO,ÅäÖÃÆµ¶ÎÔÚ430MHZ
;   0x0C,                          //Êä³ö¹¦ÂÊÎª10db,²»ÖØ·¢£¬½ÚµçÎªÕý³£Ä£Ê½
;   0x44,                         //µØÖ·¿í¶ÈÉèÖÃ£¬Îª4×Ö½Ú
;   0x04,0x04,                   //½ÓÊÕ·¢ËÍÓÐÐ§Êý¾Ý³¤¶ÈÎª4×Ö½Ú
;   0xCC,0xCC,0xCC,0xCC,        //½ÓÊÕµØÖ·
;   0x58,                      //CRC³äÐí£¬8Î»CRCÐ£Ñé£¬Íâ²¿Ê±ÖÓÐÅºÅ²»Ê¹ÄÜ£¬16M¾§Õñ
; };
; //----------------------------------NRF905º¯ÊýÉêÃ÷------------------------------
; void Delay(uint x);						       //ÑÓÊ±×Ó³ÌÐò																							
; void Spi_initial();                            //SPI³õÊ¼»¯
; uchar SpiReadSpiWrite(unsigned char cData);    //SPI¶ÁÐ´×Ó³ÌÐò
; void system_Init(void);		   				   //ÏµÍ³³õÊ¼»¯
; void Config905(void);						   //NRF905³õÊ¼»¯×Ó³ÌÐò
; void SetRxMode(void);						   //
; unsigned char CheckDR(void);
; void RxPacket(void);
; void  RX(void);
; //-------------------------------´®¿Úº¯ÊýÉêÃ÷-----------------------------------
; void StartUART(void);
; void R_S_Byte(uchar R_Byte);
; //----------------------------------100usÑÓÊ±×Ó³ÌÐò-----------------------------
; void Delay(uint x)
; {
	rjmp L3
L2:
	.dbline 103
; 	uint i;
; 	while(x--)
; 	for(i=0;i<80;i++);
	clr R20
	clr R21
	rjmp L8
L5:
	.dbline 103
L6:
	.dbline 103
	subi R20,255  ; offset = 1
	sbci R21,255
L8:
	.dbline 103
	cpi R20,80
	ldi R30,0
	cpc R21,R30
	brlo L5
X0:
L3:
	.dbline 102
	mov R2,R16
	mov R3,R17
	subi R16,1
	sbci R17,0
	tst R2
	brne L2
	tst R3
	brne L2
X1:
	.dbline -2
L1:
	.dbline 0 ; func end
	ld R21,y+
	ld R20,y+
	ret
	.dbsym r i 20 i
	.dbsym r x 16 i
	.dbend
	.dbfunc e Spi_initial _Spi_initial fV
	.even
_Spi_initial::
	.dbline -1
	.dbline 107
; }
; //----------------------------------SPI³õÊ¼»¯-----------------------------------
; void Spi_initial()
; {
	.dbline 108
; 	SPCR   = (1<<SPE)|(1<<MSTR)|(0<<CPOL)|(0<<SPR0);// Ö÷»úÄ£Ê½£¬fck/16, SPI·½Ê½0
	ldi R24,80
	out 0xd,R24
	.dbline -2
L9:
	.dbline 0 ; func end
	ret
	.dbend
	.dbfunc e SpiReadSpiWrite _SpiReadSpiWrite fc
;          cData -> R16
	.even
_SpiReadSpiWrite::
	.dbline -1
	.dbline 112
; }
; //---------------------------------SPI¶ÁÐ´³ÌÐò----------------------------------	
; uchar SpiReadSpiWrite(unsigned char cData)
; {
	.dbline 113
; 	SPDR = cData;
	out 0xf,R16
L11:
	.dbline 115
; 	while(!(SPSR & (1<<SPIF) ))  // µÈ´ýSPI·¢ËÍÍê±Ï
; 	{};			
	.dbline 115
L12:
	.dbline 114
	sbis 0xe,7
	rjmp L11
X2:
	.dbline 115
	.dbline 116
; 	return SPDR;
	in R16,0xf
	.dbline -2
L10:
	.dbline 0 ; func end
	ret
	.dbsym r cData 16 c
	.dbend
	.dbfunc e system_Init _system_Init fV
	.even
_system_Init::
	.dbline -1
	.dbline 120
; }
; //--------------------------------ÏµÍ³×´Ì¬³õÊ¼»¯--------------------------------
; void system_Init(void)			
; {
	.dbline 122
; 
;    	Hign_nrf905_CSN;			// SPIÊ¹ÄÜ
	sbi 0x18,4
	.dbline 122
	.dbline 123
; 	Low_nrf905_SCK;				
	cbi 0x18,7
	.dbline 123
	.dbline 124
; 	Low_nrf905_DR;				// DR=0
	cbi 0x18,2
	.dbline 124
	.dbline 125
; 	Low_nrf905_AM;				// AM=0
	cbi 0x18,3
	.dbline 125
	.dbline 126
; 	Low_nrf905_CD;				// CD=0
	cbi 0x12,3
	.dbline 126
	.dbline 127
; 	Hign_nrf905_PWR;		    // PWR=1
	sbi 0x18,1
	.dbline 127
	.dbline 128
; 	Low_nrf905_TRX_CE;			// nrf905_TRX_CE=0
	cbi 0x12,4
	.dbline 128
	.dbline 129
; 	Low_nrf905_TX_EN ;			// nrf905_TX_EN=0
	cbi 0x18,0
	.dbline 129
	.dbline -2
L14:
	.dbline 0 ; func end
	ret
	.dbend
	.dbfunc e Config905 _Config905 fV
;              i -> R20
	.even
_Config905::
	st -y,R20
	st -y,R21
	.dbline -1
	.dbline 133
; }
; //--------------------------------NRF905¼Ä´æÆ÷³õÊ¼»¯º¯Êý------------------------
; void Config905(void)
; {
	.dbline 135
; 	uchar i;
; 	Low_nrf905_CSN;				//SPIÊ¹ÄÜ											
	cbi 0x18,4
	.dbline 135
	.dbline 136
; 	Delay(1);				   
	ldi R16,1
	ldi R17,0
	rcall _Delay
	.dbline 137
; 	for (i=0;i<11;i++)			//Ð´RF905ÅäÖÃ×Ö
	clr R20
	rjmp L19
L16:
	.dbline 138
; 	{
	.dbline 139
; 	 SpiReadSpiWrite(RFConf[i]);
	ldi R24,<_RFConf
	ldi R25,>_RFConf
	mov R30,R20
	clr R31
	add R30,R24
	adc R31,R25
	ldd R16,z+0
	rcall _SpiReadSpiWrite
	.dbline 140
; 	}
L17:
	.dbline 137
	inc R20
L19:
	.dbline 137
	cpi R20,11
	brlo L16
X3:
	.dbline 141
; 	Hign_nrf905_CSN;					// Disable Spi
	sbi 0x18,4
	.dbline 141
	.dbline -2
L15:
	.dbline 0 ; func end
	ld R21,y+
	ld R20,y+
	ret
	.dbsym r i 20 c
	.dbend
	.dbfunc e SetRxMode _SetRxMode fV
	.even
_SetRxMode::
	.dbline -1
	.dbline 145
; }
; //------------------------------ÉèÖÃ½ÓÊÕÄ£Ê½¼¤·¢--------------------------------
; void SetRxMode(void)
; {
	.dbline 146
; 	Low_nrf905_TX_EN;
	cbi 0x18,0
	.dbline 146
	.dbline 147
; 	Hign_nrf905_TRX_CE;
	sbi 0x12,4
	.dbline 147
	.dbline 148
; 	Delay(10); 					// delay for mode change(>=650us)
	ldi R16,10
	ldi R17,0
	rcall _Delay
	.dbline -2
L20:
	.dbline 0 ; func end
	ret
	.dbend
	.dbfunc e CheckDR _CheckDR fc
	.even
_CheckDR::
	.dbline -1
	.dbline 152
; }
; //-----------------------------ÅÐ¶ÏÊÇ·ñÊÕµ½Êý¾Ý---------------------------------
; unsigned char CheckDR(void)		//¼ì²éÊÇ·ñÓÐÐÂÊý¾Ý´«Èë 
; {
	.dbline 153
; 	if (PINB & (1 << PB2))
	sbis 0x16,2
	rjmp L22
X4:
	.dbline 154
; 	{
	.dbline 155
; 		return 1; 	 	  		//ÊÕµ½Êý¾Ý
	ldi R16,1
	rjmp L21
L22:
	.dbline 158
; 	}
; 	else
; 	{
	.dbline 159
; 		return 0;
	clr R16
	.dbline -2
L21:
	.dbline 0 ; func end
	ret
	.dbend
	.dbfunc e RxPacket _RxPacket fV
;              i -> R20
	.even
_RxPacket::
	st -y,R20
	st -y,R21
	.dbline -1
	.dbline 164
; 	}
; }
; //-----------------------------------¶Á½ÓÊÕÊý¾Ý°ü-------------------------------
; void RxPacket(void)							//¶ÁÊý¾Ý
; {
	.dbline 166
; 	uchar i;
;     Low_nrf905_TRX_CE;
	cbi 0x12,4
	.dbline 166
	.dbline 167
; 	Low_nrf905_CSN;						    // Ê¹ÄÜSPI
	cbi 0x18,4
	.dbline 167
	.dbline 168
;     Delay(1);
	ldi R16,1
	ldi R17,0
	rcall _Delay
	.dbline 169
; 	SpiReadSpiWrite(RRP);				   // Ð´ÈëÊý¾Ý½ÓÊÕ»º³åÇøÊý¾ÝÃüÁî
	ldi R16,36
	rcall _SpiReadSpiWrite
	.dbline 170
; 	for (i = 0 ;i < 4 ;i++)
	clr R20
	rjmp L28
L25:
	.dbline 171
; 	{   
	.dbline 172
; 	TxRxBuffer[i]=SpiReadSpiWrite(0);	  // ¶ÁÈ¡Êý¾Ý½ÓÊÕ»º³åÇøÊý¾Ý       
	clr R16
	rcall _SpiReadSpiWrite
	ldi R24,<_TxRxBuffer
	ldi R25,>_TxRxBuffer
	mov R30,R20
	clr R31
	add R30,R24
	adc R31,R25
	std z+0,R16
	.dbline 173
; 	}
L26:
	.dbline 170
	inc R20
L28:
	.dbline 170
	cpi R20,4
	brlo L25
X5:
	.dbline 174
; 	Hign_nrf905_CSN;
	sbi 0x18,4
	.dbline 174
	.dbline 175
;     Delay(2);                            //
	ldi R16,2
	ldi R17,0
	rcall _Delay
	.dbline 176
; 	Hign_nrf905_TRX_CE;							
	sbi 0x12,4
	.dbline 176
	.dbline -2
L24:
	.dbline 0 ; func end
	ld R21,y+
	ld R20,y+
	ret
	.dbsym r i 20 c
	.dbend
	.dbfunc e RX _RX fV
	.even
_RX::
	.dbline -1
	.dbline 180
; }
; //--------------------------------ÉèÖÃ½ÓÊÕÄ£Ê½----------------------------------
; void  RX(void)
; {
	.dbline 181
;     SetRxMode();			          //ÉèÖÃNRF905½ÓÊÕÄ£Ê½
	rcall _SetRxMode
L30:
	.dbline 182
;     while (CheckDR()==0);	         //µÈ´ý½ÓÊÕÍê³É
L31:
	.dbline 182
	rcall _CheckDR
	tst R16
	breq L30
X6:
	.dbline 183
; 	RxPacket();                     //¶ÁÈ¡½ÓÊÕÊý¾Ý»º³åÇø
	rcall _RxPacket
	.dbline 184
; 	Delay(10);
	ldi R16,10
	ldi R17,0
	rcall _Delay
	.dbline -2
L29:
	.dbline 0 ; func end
	ret
	.dbend
	.dbfunc e dis_zhuye _dis_zhuye fV
	.even
_dis_zhuye::
	.dbline -1
	.dbline 189
; }
; 
; //----------------------------ÎÂ¶ÈLEDÔÊ¾½çÃæ-----------------------------------
; void  dis_zhuye()
; {
	.dbline 190
; 	 PORTC=seg[TxRxBuffer[2]];
	ldi R24,<_seg
	ldi R25,>_seg
	lds R30,_TxRxBuffer+2
	clr R31
	add R30,R24
	adc R31,R25
	ldd R2,z+0
	out 0x15,R2
	.dbline 191
; 	 Hign_Display4;
	sbi 0x1b,4
	.dbline 191
	.dbline 192
; 	 Hign_Display3;
	sbi 0x1b,3
	.dbline 192
	.dbline 193
; 	 Hign_Display2;
	sbi 0x1b,2
	.dbline 193
	.dbline 194
; 	 Low_Display1;
	cbi 0x1b,1
	.dbline 194
	.dbline 195
; 	 Delay(80);
	ldi R16,80
	ldi R17,0
	rcall _Delay
	.dbline 196
; 	 Hign_Display1;
	sbi 0x1b,1
	.dbline 196
	.dbline 198
; //------------------------------------------------------------------------------
; 	 PORTC=seg1[TxRxBuffer[1]];
	ldi R24,<_seg1
	ldi R25,>_seg1
	lds R30,_TxRxBuffer+1
	clr R31
	add R30,R24
	adc R31,R25
	ldd R2,z+0
	out 0x15,R2
	.dbline 199
; 	 Low_Display2;
	cbi 0x1b,2
	.dbline 199
	.dbline 200
; 	 Delay(80);
	ldi R16,80
	ldi R17,0
	rcall _Delay
	.dbline 201
; 	 Hign_Display2;
	sbi 0x1b,2
	.dbline 201
	.dbline 203
; //------------------------------------------------ ---------------------------
; 	 PORTC=seg[TxRxBuffer[0]];
	ldi R24,<_seg
	ldi R25,>_seg
	lds R30,_TxRxBuffer
	clr R31
	add R30,R24
	adc R31,R25
	ldd R2,z+0
	out 0x15,R2
	.dbline 204
; 	 Low_Display3;
	cbi 0x1b,3
	.dbline 204
	.dbline 205
; 	 Delay(80);
	ldi R16,80
	ldi R17,0
	rcall _Delay
	.dbline 206
; 	 Hign_Display3;
	sbi 0x1b,3
	.dbline 206
	.dbline 208
; //----------------------------------------------------------------------------- 
; 	 PORTC=0xc6;
	ldi R24,198
	out 0x15,R24
	.dbline 209
; 	 Low_Display4;
	cbi 0x1b,4
	.dbline 209
	.dbline 210
; 	 Delay(80);
	ldi R16,80
	ldi R17,0
	rcall _Delay
	.dbline 211
; 	 Hign_Display4;	 
	sbi 0x1b,4
	.dbline 211
	.dbline -2
L33:
	.dbline 0 ; func end
	ret
	.dbend
	.dbfunc e StartUART _StartUART fV
	.even
_StartUART::
	.dbline -1
	.dbline 216
; //------------------------------------------------------------------------------ 	
; }
; //-------------------------------´®¿Ú³õÊ¼»¯-------------------------------------
; void StartUART(void)
; {
	.dbline 217
;  	 UCSRA=0x00;	
	clr R2
	out 0xb,R2
	.dbline 218
; 	 UCSRB=0x18;	
	ldi R24,24
	out 0xa,R24
	.dbline 219
; 	 UCSRC=0x06;	
	ldi R24,6
	out 0x20,R24
	.dbline 220
; 	 UBRRL=0x67;
	ldi R24,103
	out 0x9,R24
	.dbline 221
; 	 UBRRH=0x00;
	out 0x20,R2
	.dbline 222
; 	 UCSRA=UCSRA|0x08;	
	sbi 0xb,3
	.dbline -2
L36:
	.dbline 0 ; func end
	ret
	.dbend
	.dbfunc e R_S_Byte _R_S_Byte fV
;         R_Byte -> R16
	.even
_R_S_Byte::
	.dbline -1
	.dbline 226
; }
; //------------------------------´®¿Ú·¢ËÍ----------------------------------------
; void R_S_Byte(uchar R_Byte)
; {	
	.dbline 227
;      UDR= R_Byte;  
	out 0xc,R16
	.dbline -2
L37:
	.dbline 0 ; func end
	ret
	.dbsym r R_Byte 16 c
	.dbend
	.dbfunc e main _main fV
;              i -> R20
	.even
_main::
	.dbline -1
	.dbline 231
; }
; //------------------------------Ö÷º¯Êý------------------------------------------
; void main(void)
; {  
	.dbline 233
; 	uchar i;
; 	DDRD=0xb2;		  //
	ldi R24,178
	out 0x11,R24
	.dbline 234
; 	DDRB=0xB3;		  //
	ldi R24,179
	out 0x17,R24
	.dbline 235
; 	DDRA=0x1e;       //
	ldi R24,30
	out 0x1a,R24
	.dbline 236
; 	DDRC=0xff; 		//LED¶Ë¿ÚÉèÖÃ
	ldi R24,255
	out 0x14,R24
	.dbline 237
; 	PORTA = 0xff;
	out 0x1b,R24
	.dbline 238
; 	Hign_BELL;	
	sbi 0x12,5
	.dbline 238
	.dbline 239
; 	Hign_JDQ ;			
	sbi 0x12,7
	.dbline 241
; //------------------------------------------------------------------------------				  			 				
; 	Spi_initial();	                //SPI³õÊ¼»¯															  
	rcall _Spi_initial
	.dbline 242
; 	system_Init();				   //ÏµÍ³×´Ì¬³õÊ¼»¯												
	rcall _system_Init
	.dbline 243
; 	Config905();  				  //NRF905³õÊ¼»¯	
	rcall _Config905
	.dbline 246
; //------------------------------------------------------------------------------							  
; //------------------------------------------------------------------------------
; 	StartUART();				//´®¿Ú³õÊ¼»¯9600²¨ÌØÂÊ
	rcall _StartUART
	.dbline 247
; 	Delay(500);
	ldi R16,500
	ldi R17,1
	rcall _Delay
	rjmp L40
L39:
	.dbline 250
; //------------------------------------------------------------------------------
; 	while(1)
; 	{
	.dbline 251
; 	RX();  					//½ÓÊÕÊý¾Ý
	rcall _RX
	.dbline 252
; 	if(TxRxBuffer[0])
	lds R2,_TxRxBuffer
	tst R2
	breq L42
X7:
	.dbline 253
; 		{
	.dbline 254
; 		temp[2]=((TxRxBuffer[2]<<4)|TxRxBuffer[1]);		//ÕûÊýÎ»
	lds R2,_TxRxBuffer+1
	clr R3
	lds R4,_TxRxBuffer+2
	clr R5
	lsl R4
	rol R5
	lsl R4
	rol R5
	lsl R4
	rol R5
	lsl R4
	rol R5
	or R4,R2
	or R5,R3
	sts _temp+4+1,R5
	sts _temp+4,R4
	.dbline 255
; 		temp[1]=TxRxBuffer[0];							//Ð¡ÊýÎ»
	lds R2,_TxRxBuffer
	clr R3
	sts _temp+2+1,R3
	sts _temp+2,R2
	.dbline 256
; 		temp[0]=TxRxBuffer[3];     					    //·ûºÅÎ»
	lds R2,_TxRxBuffer+3
	clr R3
	sts _temp+1,R3
	sts _temp,R2
	.dbline 259
; 		//temp[4]=TxRxBuffer[2];						//Ê®Î»
; 		//temp[5]=TxRxBuffer[1];						//¸öÎ»
; 	for(i=0;i<3;i++)
	clr R20
	rjmp L52
L49:
	.dbline 260
; 		{
	.dbline 261
; 		R_S_Byte(temp[2-i]);      //´®¿ÚÏÔÊ¾ÎÂ¶È
	mov R2,R20
	clr R3
	ldi R30,2
	ldi R31,0
	sub R30,R2
	sbc R31,R3
	lsl R30
	rol R31
	ldi R24,<_temp
	ldi R25,>_temp
	add R30,R24
	adc R31,R25
	ldd R16,z+0
	rcall _R_S_Byte
	.dbline 262
; 		Delay(20);
	ldi R16,20
	ldi R17,0
	rcall _Delay
	.dbline 263
; 		}
L50:
	.dbline 259
	inc R20
L52:
	.dbline 259
	cpi R20,3
	brlo L49
X8:
	.dbline 265
; 		
; 	}
L42:
	.dbline 266
; 	if((temp[2]>=53)||(temp[2]<=32))//´óÓÚ35¶ÈÊ±±¨¾¯£¬0x35×ª»»³É10½øÖÆÎª53
	lds R24,_temp+4
	lds R25,_temp+4+1
	cpi R24,53
	ldi R30,0
	cpc R25,R30
	brsh L57
X9:
	ldi R24,32
	ldi R25,0
	lds R2,_temp+4
	lds R3,_temp+4+1
	cp R24,R2
	cpc R25,R3
	brlo L53
X10:
L57:
	.dbline 268
; 									//µÍÓÚ20¶ÈÊ±Ò²±¨¾¯,0x20,×ª»»³É10½øÖÆÎª	32						  									  																
; 	{
	.dbline 269
; 		Low_BELL;  //´ò¿ª·äÃ÷Æ÷±¨¾¯
	cbi 0x12,5
	.dbline 269
	.dbline 270
; 		Low_JDQ;   //´ò¿ª¼ÌµçÆ÷¡£¿ÉÒÔ½øÐÐÏà¹ØµçÆ÷¿ª¹Ø²Ù×÷
	cbi 0x12,7
	.dbline 271
; 	}
	rjmp L54
L53:
	.dbline 273
; 	else
; 	{
	.dbline 274
; 	 	Hign_BELL ;//¹Ø±Õ·äÃ÷Æ÷±¨¾¯
	sbi 0x12,5
	.dbline 274
	.dbline 275
; 		Hign_JDQ;  //¹Ø±Õ¼ÌµçÆ÷
	sbi 0x12,7
	.dbline 276
; 	}
L54:
	.dbline 277
; 	dis_zhuye();
	rcall _dis_zhuye
	.dbline 278
; 	}
L40:
	.dbline 249
	rjmp L39
X11:
	.dbline -2
L38:
	.dbline 0 ; func end
	ret
	.dbsym r i 20 c
	.dbend
	.area bss(ram, con, rel)
	.dbfile F:\JASK\ÎÞÏß×ÊÁÏ¼¯½õ\¿ª·¢±¸·Ý\JASKÏµÁÐÆÀ¹À°å0906\JASK2001ÏµÁÐ°¸Àý²Î¿¼´úÂë\M16-RF905¿ª·¢°ü\ÎÞÏßÎÂ¶È¼à¿ØÏµÍ³\JIESHOU-LED\Wendu_jieshou.c
_temp::
	.blkb 12
	.dbsym e temp _temp A[12:6]i
_TxRxBuffer::
	.blkb 4
	.dbsym e TxRxBuffer _TxRxBuffer A[4:4]c
; }
